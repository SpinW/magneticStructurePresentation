
<section>
    <style>
        .tab {
            text-indent: 40px;
        }

        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%;
        }

        .column {   
            float: left;
            width: 50%;
        }  
        
        /* Clear floats after the columns */ 
        .row:after {
            content: "";
            display: table;
            clear: both;
        }
        
        .defaulttable {
          display: table;
        }
        .defaulttable thead {
          display: table-header-group;
        }
        .defaulttable tbody {
          display: table-row-group;
        }
        .defaulttable tfoot {
          display: table-footer-group;
        }
        .defaulttable tbody>tr:hover,
        .defaulttable tbody>tr {
          display: table-row;
        }
        .defaulttable tbody>tr:hover>td,
        .defaulttable tbody>tr>td {
          display: table-cell;
        }
        .defaulttable,
        .defaulttable tbody,
        .defaulttable tbody>tr:hover,
        .defaulttable tbody>tr,
        .defaulttable tbody>tr:hover>td,
        .defaulttable tbody>tr>td,
        .defaulttable tbody>tr:hover>th,
        .defaulttable tbody>tr>th,
        .defaulttable thead>tr:hover>td,
        .defaulttable thead>tr>td,
        .defaulttable thead>tr:hover>th,
        .defaulttable thead>tr>th,
        .defaulttable tfoot>tr:hover>td,
        .defaulttable tfoot>tr>td,
        .defaulttable tfoot>tr:hover>th,
        .defaulttable tfoot>tr>th {
          background: transparent;
          background-color: #FFF;
          border: 0px solid #000;
          border-spacing: 0px;
          border-collapse: separate;
          empty-cells: show;
          padding: 0px;
          margin: 0px;
          outline: 0px;
          font-size: 100%;
          color: #000;
          vertical-align: top;
          text-align: left;
          font-family: sans-serif;
          table-layout: auto;
          caption-side: top;
          -webkit-border-radius: 0px;
          -moz-border-radius: 0px;
          border-radius: 0px;
          -webkit-background-clip: padding-box;
          -moz-background-clip: padding;
          background-clip: padding-box;
        }

        .limiter {
            width: 100%;
            margin: 0 auto;
        }

        .wrap-table100 {
            width: 100%;
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        table {
            border-spacing: 1;
            border-collapse: collapse;
            background: #F8F8F8;
            border-radius: 10px;
            overflow: hidden;
            width: 100%;
            margin: 0 auto;
            position: relative;
        }
        table * {
            position: relative;
        }
        table td, table th {
            padding-left: 8px;
        }
        table thead tr {
            height: 60px;
            background: #36304a;
        }
        table tbody tr {
            height: 50px;
        }
        table tbody tr:last-child {
            border: 0;
            border-right: none;
        }
        table tbody td:last-child {
            border-right: none;
        }
        table td, table th {
            text-align: left;
        }
        table td.l, table th.l {
            text-align: right;
        }
        table td.c, table th.c {
            text-align: center;
        }
        table td.r, table th.r {
            text-align: center;
        }


        .table100-head th{
            color: #fff;
            line-height: 1.2;
            font-weight: unset;
        }

        tbody tr:nth-child(even) {
            background-color: #E8E8E8;
        }

        tbody tr {
            color: #606060;
            line-height: 1.2;
            font-weight: unset;
        }

        tbody tr:hover {
            color: #555555;
            background-color: #f5f5f5;
            cursor: pointer;

        }

        .lastcolumn {
            text-align: right;
        }
        @media screen and (max-width: 640px) {
            table {
                overflow-x: auto;
                display: block;
            }
        }

        @media screen and (max-width: 992px) {
            table {
                display: block;
            }
            table > *, table tr, table td, table th {
                display: block;
            }
            table thead {
                display: none;
            }
            table tbody tr {
                height: auto;
                padding: 37px 0;
            }
            table tbody tr td {
                padding-left: 40% !important;
                margin-bottom: 24px;
            }
            table tbody tr td:last-child {
                margin-bottom: 0;
            }
            table tbody tr td:before {
                font-family: OpenSans-Regular;
                font-size: 14px;
                color: #999999;
                line-height: 1.2;
                font-weight: unset;
                position: absolute;
                width: 40%;
                left: 30px;
                top: 0;
            }

            tbody tr {
                font-size: 14px;
            }
        }
    </style>
    <section class="intro" id="SpinW">
        <div class="logo-wrapper">
            <div class="logo"><span class="visually-hidden">SpinW</span></div>
        </div>
    </section>
    
    <section class="title" id="title">
        <div class="grid-wrapper">
            <div class="header">
                <!-- Remove logo--full class to only show brand mark -->
                <div class="logo logo--full"><span class="visually-hidden">SpinW</span></div>
            </div>
            <div class="content">
                <h1>Magnetic Structures in SpinW</h1>
                <div class="description">
                    How to define a magnetic structure for your calculations and refine it.
                </div>
            </div>
            <div class="credit">
                <hr/>
                <div class="label">Presented By</div>
                <div class="name">Duc Le</div>
                <div class="role">Instrument Scientist - ISIS Facility</div>
            </div>
        </div>
    </section>
</section>

<section>
    <section class="subsection color--radiant" id="introhead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1>Magnetic Structures in SpinW</h1>
            <div class="description">
                Defining and refining a magnetic structure in SpinW
            </div>
        </div>
    </section>

    <section class="showit" id="Intro1">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Introduction</div>
            </div>
            <content>
                <div class="profile">
                    <div class="basics">
                        <!--
                        <object data="images/lat.svg" type="image/svg+xml" style="width: 100%">
                            <img src="yourfallback.jpg" />
                        </object>
                        -->
                        <div class="wrap-table100">
                            <div class="table100">
                                <table>
                                    <thead>
                                    <tr class="table100-head">
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$\hat{S}^{\pm}|m\rangle = \sqrt{(S\mp m)(S+1\pm m)}\ \ |m\pm1\rangle$$</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr> 
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$m = S, S-1, S-2, ..., -S$$</th>
                                    <tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <h3 style="text-align: center; font-size: 48px"> &dArr; </h3>
                        <div class="wrap-table100">
                            <div class="table100">
                                <table>
                                    <thead>
                                    <tr class="table100-head">
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$a|n\rangle = \sqrt{n}\ |n-1\rangle$$</th>
                                    </tr>
                                    <tr class="table100-head">
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$a^{\dagger}|n\rangle = \sqrt{n+1}\ |n+1\rangle$$</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr> 
                                        <th colspan="16" style="text-align: center; font-size:smaller">$$n=0, 1, 2, ..., \infty$$</th>
                                    <tr> 
                                    </tr>
                                        <th colspan="16" style="text-align: center; font-size:smaller">$n=0$ corresponds to $m=S$</th>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="name">Holstein-Primakoff Transformation</div>
                        <div class="role">In linear spin wave theory, the vacuum state $n=0$ corresponds to the fully ordered state $m=S$</div>
                    </div>
                    <div id="details">
                        <h3>Introduction</h3>
                        <p> Linear spin wave theory is about small deviations of the spins away from their (ordered) ground state </p>
                        <p> Therefore, before calculating the spin precessions, we need to define the ordered state </p>
                        <p> There are two main ways to define the magnetic structure in SpinW: </p>
                        <div style="margin-left:40px">
                            <ul>
                                <li> Directly, by specifying the spin directions in the (super)lattice </li>
                                <li> For single-$k$ structures, the propagation vector and initial spin direction can be given instead </li>
                                <li> Single-$k$ structures can also be defined by an initial direction and an angular offset </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </content>
        </div>
    </section>
    <section class="showit" id="Intro2">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Introduction</div>
            </div>
            <content>
                <div class="profile">
                    <div class="basics">
                        <!--
                        <object data="images/lat.svg" type="image/svg+xml" style="width: 100%">
                            <img src="yourfallback.jpg" />
                        </object>
                        -->
                        <div class="wrap-table100">
                            <div class="table100">
                                <table>
                                    <thead>
                                    <tr class="table100-head">
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$\hat{S}^{\pm}|m\rangle = \sqrt{(S\mp m)(S+1\pm m)}\ \ |m\pm1\rangle$$</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr> 
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$m = S, S-1, S-2, ..., -S$$</th>
                                    <tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <h3 style="text-align: center; font-size: 48px"> &dArr; </h3>
                        <div class="wrap-table100">
                            <div class="table100">
                                <table>
                                    <thead>
                                    <tr class="table100-head">
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$a|n\rangle = \sqrt{n}\ |n-1\rangle$$</th>
                                    </tr>
                                    <tr class="table100-head">
                                        <th colspan="8" style="text-align: center; font-size:smaller">$$a^{\dagger}|n\rangle = \sqrt{n+1}\ |n+1\rangle$$</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr> 
                                        <th colspan="16" style="text-align: center; font-size:smaller">$$n=0, 1, 2, ..., \infty$$</th>
                                    <tr> 
                                    </tr>
                                        <th colspan="16" style="text-align: center; font-size:smaller">$n=0$ corresponds to $m=S$</th>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="name">Holstein-Primakoff Transformation</div>
                        <div class="role">In linear spin wave theory, the vacuum state $n=0$ corresponds to the fully ordered state $m=S$</div>
                    </div>
                    <div id="details">
                        <p> Because of the Hamiltonian in SpinW is formulated in a rotating coordinate system, defining a single-$k$ magnetic
                            structure using a propagation vector is computationally more efficient than defining a supercell </p>
                        <p> This method will also allow the definition of a true incommensurate structure </p>
                        <p> This is in contrast to similar programs such as SpinWaveGenie and McPhase which only allow the supercell definition </p>
                        <p> However, multi-$k$ and more complex structures cannot be defined in this way and will need a supercell </p>
                    </div>
                </div>
            </content>
        </div>
    </section>
</section>

<section>
    <section class="subsection color--radiant" id="mag_str_head">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1>Magnetic Structure Theory</h1>
            <div class="description">
                Referesher on basis and propagation vectors
            </div>
        </div>
    </section>

    <section class="showit" id="magstr_theory1">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Magnetic Structure Theory</div>
            </div>
            <content>
                <h3>Magnetic Structure Theory Refresher</h3>
                <figure class="image" style="width: 100%; margin-left:30%">
                    <p><img src="images/propvect.svg" style="width: 30%;" alt="propagation_vector">
                    <figcaption class="text"></figcaption>
                </figure>
                <p> The $j^{\mathrm{th}}$ magnetic moment in unit cell $l$ which is separated from the first unit cell $0$ by the
                    vector $t$ can be expressed as a Fourier series, <p>
                <p> $$ \mathbf{m}_j = \sum_{n} \mathbf{\Psi}_j^{\mathbf{k}_n} \exp^{-2\pi i\mathbf{k}_n\cdot\mathbf{t}} $$ </p>
            </content>
        </div>
    </section>

    <section class="showit" id="magstr_theory2">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Magnetic Structure Theory</div>
            </div>
            <content>
                <div class="profile">
                    <div class="basics">
                        <figure class="image" style="width: 100%; margin-left:15%">
                        <p><img src="images/propvect.svg" style="width: 70%;" alt="propagation_vector">
                        </figure>
                        <div class="role" style="text-align:center">$\mathbf{m}_j = \sum_{n} \mathbf{\Psi}_j^{\mathbf{k}_n} \exp^{-2\pi i\mathbf{k}_n\cdot\mathbf{t}}$</div>
                    </div>
                    <div id="details">
                        <p> For many materials, there is only a single propagation vector $k$: </p>
                        <p> $$ \mathbf{m}_j = \mathbf{\Psi}_j^{\mathbf{k}} \exp^{-2\pi i\mathbf{k}\cdot\mathbf{t}} $$ </p>
                        <p> The allowed propagation vectors $\mathbf{k}_n$ are related to each to each other by the rotation
                            symmetry of the crystal structure (they are the <i>star</i> of $k$). </p>
                        <p> In the case of a single-$k$ magnetic structure, the spin wave Hamiltonian is invariant under all
                            rotations </p>
                        <p> This allows the Hamiltonian to be expressed in a rotating coordinate system which allows SpinW to 
                            calculate more efficiently than codes which define the magnetic structure in terms of a supercell. </p>
                    </div>
                </div>
            </content>
        </div>
    </section>

    <section class="showit" id="magstr_theory3">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Magnetic Structure Theory</div>
            </div>
            <content>
                <div class="profile">
                    <div class="basics">
                        <figure class="image" style="width: 100%; margin-left:15%">
                        <p><img src="images/propvect.svg" style="width: 70%;" alt="propagation_vector">
                        </figure>
                        <div class="role" style="text-align:center">$\mathbf{m}_j = \sum_{n} \mathbf{\Psi}_j^{\mathbf{k}_n} \exp^{-2\pi i\mathbf{k}_n\cdot\mathbf{t}}$</div>
                    </div>
                    <div id="details">
                        <p> The <i>basis vector</i> $\mathbf{\Psi}_j^{\mathbf{k}}$ is in general complex. </p>
                        <p> A complex basis vector requires both $\mathbf{k}$ and $-\mathbf{k}$ components to produce a real moment </p>
                        <p> $$ \mathbf{m}_j = \mathbf{\Psi}_j^{\mathbf{k}} \left[\cos(-2\pi \mathbf{k}\cdot\mathbf{t}) + i\sin(-2\pi \mathbf{k}\cdot\mathbf{t})\right]
                                            + \mathbf{\Psi}_j^{-\mathbf{k}} \left[\cos(2\pi \mathbf{k}\cdot\mathbf{t}) + i\sin(2\pi \mathbf{k}\cdot\mathbf{t})\right] $$ </p>
                        <p> $$ = 2\operatorname{Re}(\mathbf{\Psi}_j^{\mathbf{k}}) \cos(-2\pi \mathbf{k}\cdot\mathbf{t}) 
                               + 2\operatorname{Im}(\mathbf{\Psi}_j^{\mathbf{k}}) \sin(-2\pi \mathbf{k}\cdot\mathbf{t}) $$ </p>
                        <p> because $\mathbf{\Psi}_j^{-\mathbf{k}} = (\mathbf{\Psi}_j^{\mathbf{k}})^{\dagger} = \operatorname{Re}(\mathbf{\Psi}_j^{\mathbf{k}}) - i\operatorname{Im}(\mathbf{\Psi}_j^{\mathbf{k}})$ </p>
                        <p> A real basis vector will only give a collinear magnetic structure, but possibly with a varying moment </p>
                        <p> A complex basis vector with imaginery part perpendicular to the real part can give helical magnetic structures. </p>
                        <p> <br> </p>
                        <p> Reference: A.S. Wills, <i>J. Phys. IV France</i>, <b>11</b> (Pr9) 133-158 (2001). </p>
                        <p> <a href="https://doi.org/10.1051/jp4:2001906">https://doi.org/10.1051/jp4:2001906</a> </p>
                    </div>
                </div>
            </content>
        </div>
    </section>

</section>


<section>
    <section class="subsection color--radiant" id="mag_str_head">
    <div class="grid-wrapper">
        <div class="logo"></div>
        <h1><code>spinw.mag_str</code></h1>
        <div class="description">
            How SpinW stores the magnetic structure
        </div>
    </div>
    </section>

    <section class="showit" id="mag_str1">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Input magnetic structure</div>
            </div>
            <content>
                <p> SpinW stores the magnetic structure is stored in the <b><code>spinw.mag_str</code></b> field. </p>
                <p> It can store arbitrary magnetic structures using Fourier components. </p>
                <br>
                <p> Subfields: </p>
                <div style="margin-left:40px">
                    <br>
                    <ul>
                        <li>The propagation vectors $\mathbf{k}$ are stored in <b><code>k</code></b></li>
                        <li>The basis vectors $\mathbf{\Psi}_j$ are stored in <b><code>F</code></b></li>
                        <li>The magnetic supercell in lattice units are stored in <b><code>nExt</code></b></li>
                    </ul>
                </div>
                <br>
                <p> The experimental magnetization can be obtained by multiplying <b><code>F</code></b> with the g-tensor!  </p>
            </content>
        </div>
    </section>

    <section class="showit" id="magstr_theory3">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Input magnetic structure</div>
            </div>
            <content>
                <div class="profile">
                    <div class="basics">
                        <div class="role" style="width:60%">
                            <table class="defaulttable">
                                <tr> <td>Propagation vector:</td> <td><b><code>mag_str.k</code></b></td> </tr>
                                <tr> <td>Basis vector:</td> <td><b><code>mag_str.F</code></b></td> </tr>
                                <tr> <td>Magnetic supercell:</td> <td><b><code>mag_str.nExt</code></b></td> </tr>
                            </table>
                        </div>
                    </div>
                    <div id="details">
                        <p> A helical or modulated single-$k$ structure can be stored by using <b><code>k</code></b> and <b><code>F</code></b>
                            and setting <b><code>nExt</code></b> to a single unit cell <b><code>[1 1 1]</code></b> </p>
                        <p> If there are <code>n</code> atoms in the structural unit cell, <b><code>F</code></b> should be an
                            <code>n</code>-column matrix. </p>
                    </div>
                </div>
            </content>
        </div>
    </section>


    <section class="showit" id="mag_str2">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Input magnetic structure</div>
            </div>
            <content>
                <div class="profile">
                    <div class="basics">
                        <div class="role" style="width:60%">
                            <table class="defaulttable">
                                <tr> <td>Propagation vector:</td> <td><b><code>mag_str.k</code></b></td> </tr>
                                <tr> <td>Basis vector:</td> <td><b><code>mag_str.F</code></b></td> </tr>
                                <tr> <td>Magnetic supercell:</td> <td><b><code>mag_str.nExt</code></b></td> </tr>
                            </table>
                        </div>
                    </div>
                    <div id="details">
                        <p> A supercell magnetic structure can be stored by using a real <b><code>F</code></b> and <b><code>nExt</code></b>
                            and setting <b><code>k</code></b> to zero <b><code>[0 0 0]</code></b>.
                        <p> The number of magnetic moments stored in <code>F</code> are: <code>nMagExt = prod(nExt)*nMagAtom</code> </p>
                        <p> So, <b><code>F</code></b> should be an <code>nMagExt</code>-column matrix with moments in the following order:</p>
                        <figure class="image" style="width: 100%">
                            <p><img src="images/momentlayout.svg" style="width: 30%;" alt="Mag_str">
                            <figcaption class="text">Ordering of the unit cell in the magnetic super-cell.</figcaption>
                        </figure>
            </content>
        </div>
    </section>

    <section class="showit" id="mag_str3">
        <div class="grid-wrapper">
            <div class="header">
                <div class="logo"></div>
                <div class="section">Input magnetic structure</div>
            </div>
            <content>
                <figure class="image" style="width: 100%; margin-left:30%">
                    <figcaption class="text">1D AFM spin chain</figcaption>
                    <img src="images/spinw_chain.svg" style="width: 30%;" alt="spin_chain">
                </figure>
                <p> </p>
                <p> </p>
                <div class="row">
                    <div class="column">Single-$k$ mode</div>
                    <div class="column">Supercell mode</div>
                </div>
                <div class="row">
                    <div class="column">
                    <pre style="font-size:larger">
mag_str.N_ext = [1 1 1];
mag_str.k     = [1/2 0 0];
mag_str.F     = [-i; 
                 1; 
                 0];
                    </pre>
                    </div>
                    <div class="column">
                    <pre style="font-size:larger">
mag_str.N_ext = [2 1 1];
mag_str.k     = [0 0 0];
mag_str.F     = [0 0; 
                 1 -1; 
                 0 0];
                    </pre>
                    </div>
                </div>
            </content>
        </div>
    </section>
</section>

<section class="blank" id="magStr_RF">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Magnetic structure in rotating frame</div>
        </div>
        <content>

            <p>For spin wave calculation, the complex magnetic structure is converted to the rotating frame representation using the
                <code>spinw.magstr()</code> function.</p>
            <p>Output of <code>spinw.magstr()</code> is a struct with fields:</p>
            <ul>
                <li>size of magnetic supercell in l.u. stored in <b><code>nExt</code></b></li>
                <li>single k-vector stored in <b><code>k</code></b></li>
                <li>vector normal to the spiral plane is stored in <b><code>n</code></b></li>
                <li>real magnetic moment directions (spin quantization axis) are stored in <b><code>S</code></b></li>
            </ul>

            <p>The representation allows an additional <code>k=0</code> component parallel to <code>n</code>, however this is rarely used.</p>
            <p>The conversion from Fourier components to rotating frame representation is not always possible, in this case
                <code>magstr()</code> gives the best approximation and gives a warning. The conversion is approximate:</p>
            <ul>
                <li>multi-k structures</li>
                <li>non-Bravais lattice with counter-rotating incommensurate spirals</li>
                <li>non-Bravais lattice with non-coplanar spirals</li>
                <li>non-Bravais antiferromagnet with non-coplanar moments</li>
            </ul>
        </content>
    </div>
</section>

<section class="blank" id="magSC">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Magnetic supercell</div>
        </div>
        <content>

        </content>
    </div>
</section>

<section class="blank" id="enterMagStr1">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Input magnetic structures</div>
        </div>
        <content>
            <p>To input magnetic structures use <code>spinw.genmagstr(‘mode’,...)</code></p>
            <p>Possible modes:</p>
            <h3>RANDOM</h3>
            <p class="tab">random real and imaginary magnetization vectors</p>
            <p class="tab"><code>chain.genmagstr('mode','random','next',[4 1 1])</code></p>
            <h3>DIRECT</h3>
            <p class="tab">direct input of every field</p>
            <p class="tab"><code>chain.genmagstr('mode','direct','next',[4 1 1],'S',[1 0 -1 0;0 1 0 -1;0 0 0 0]);</code></p>
            <h3>TILE</h3>
            <p class="tab">tile a magnetic supercell using the given data</p>
            <p><code></code></p>
        </content>
    </div>
</section>

<section class="blank" id="enterMagStr2">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Input magnetic structures</div>
        </div>
        <content>
            <h3>HELICAL – FOURIER</h3>
            <p class="tab">extend the given structure by applying rotations on the moments
                moments are either given in rotating frame formalism (S,n) or as complex vectors (S)</p>
            <p class="tab"><code>chain.genmagstr('mode','helical','next',[4 1 1],'S',[1; 0; 0],'k',[1/8 0 0],'n',[0 0 1])</code></p> 
            <p class="tab"><code>chain.genmagstr('mode','fourier','next',[8 1 1],'Fk',{[1; 1i; 0] [1/8 0 0]})</code></p>
            <h3>ROTATE</h3>
            <p class="tab">uniform rotation of all moments</p>
            <p class="tab"><code>chain.genmagstr('mode','rotate','n',[1 0 0])</code></p>
            <h3>FUNC</h3>
            <p class="tab">give parameters to a constraint function to generate magnetic structure</p>
            <p class="tab"><code>chain.genmagstr('mode','func','func',@gm_spherical3d,'x',[pi/2 0.2 pi/2 0.4 pi/2 0.6 pi/2 0.8 0 0 0 0 0])</code></p>
        </content>
    </div>
</section>

<section class="blank" id="optMagStrOptions">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Optimize magnetic structures</div>
        </div>
        <content>
            <p>The magnetic structure can be optimised as a classical ground state of the spin Hamiltonian.</p>
            <p>Three methods are available:</p>
            <h2><code>sw.optmagk()</code></h2>
            <ul>
                <li>determines the magnetic propagation vector + n-vector</li>
            </ul>
            <h2><code>sw.optmagtsteep()</code></h2>
            <ul>
                <li>optimise magnetic structure for a given k-vector by succesively rotating each moment to the Weiss
                    field direction</li>
                <li>fastest</li>
                <li>recommended if k-vector is known</li>
            </ul>
            <h2><code>sw.optmagstr()</code></h2>
            <ul>
                <li>optimise magnetic structure for minimum energy using non-linear optimization (fminsearch)</li>
                <li>can include a constraint function (<code>@gm_planar()</code>, etc.)</li>
            </ul>
            <h2><code>sw.anneal()</code></h2>
            <ul>
                <li>performs simulated annealing, using the Metropolis algorithm</li>
                <li>can calculate thermodynamic properties</li>
            </ul>
        </content>
    </div>
</section>


<section class="blank" id="optMagStrOptions">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Optimize magnetic structures</div>
        </div>
        <content>
            <p>The magnetic structure can be optimised as a classical ground state of the spin Hamiltonian.</p>
            <p>Three methods are available:</p>
            <h2><code>sw.optmagk()</code></h2>
            <ul>
                <li>determines the magnetic propagation vector + n-vector</li>
            </ul>
            <h2><code>sw.optmagtsteep()</code></h2>
            <ul>
                <li>optimise magnetic structure for a given k-vector by succesively rotating each moment to the Weiss
                    field direction</li>
                <li>fastest</li>
                <li>recommended if k-vector is known</li>
            </ul>
            <h2><code>sw.optmagstr()</code></h2>
            <ul>
                <li>optimise magnetic structure for minimum energy using non-linear optimization (fminsearch)</li>
                <li>can include a constraint function (<code>@gm_planar()</code>, etc.)</li>
            </ul>
            <h2><code>sw.anneal()</code></h2>
            <ul>
                <li>performs simulated annealing, using the Metropolis algorithm</li>
                <li>can calculate thermodynamic properties</li>
            </ul>
        </content>
    </div>
</section>


<!--TODO make flow diagram for spin optimisation-->
<section class="blank" id="optMagStrFns">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">spinw.optmagstr(‘func’,@func, ‘xmin’, x1, ‘xmax’, x2,...)</div>
        </div>
        <content>
            <p>To optimize magnetic structure with constraints, use the spinw.optmagstr() method.</p>
            <ul>
                <li>lots of parameters to fit: $3N_{mag} + 6$</li>
                <li>ground state magnetic structure with <b>constrained optimization</b> (simplex method)</li>
                <li>constraints through external function:</li>
                $$[M, k, n] = @(x)\mathtt{func}(M0, x)$$
                <li><b><code>@gm_planar()</code></b> planar magnetic structure:</li>
                $$[M, k, n] = \mathtt{@gm\_planar}(M0, x) \\
                x = (\varphi_1,\varphi_2,... ,k_x,k_y,k_z,n_\Theta,n_\varphi)$$
                <li><b><code>@gm_spherical3d()</code></b> general magnetic structure:</li>
                $$[M, k, n] = \mathtt{@gm\_spherical3d}(M0, x) \\
                x = (\varphi_1,\Theta_1,\varphi_2,\Theta_2,... ,k_x,k_y,k_z,n_\Theta,n_\varphi)$$
                <li>limits: <code>xmin</code> and <code>xmax</code>, starting value <code>x0</code></li>
            </ul>
        </content>
    </div>
</section>
